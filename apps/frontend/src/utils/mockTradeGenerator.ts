import type { Trade } from "@/types/trade";
import { createConfluenceFactor } from "../types/confluence";
import { generateMockCandles } from "../components/CandlestickChart";

// Helper to generate mock trades with new confluence system
export function generateMockTrades(): Trade[] {
  return [
    // KCU Strategy: EMA(8) Bounce
    {
      id: "1",
      symbol: "SPY",
      setup: "EMA(8) Bounce + PC",
      price: 452.4,
      change: 2.45,
      changePercent: 0.54,
      conviction: "HIGH",
      entry: 451.5,
      target: 458.0,
      stop: 449.0,
      riskReward: "2.6:1",
      status: "SETUP_READY",
      confluenceFactors: [
        createConfluenceFactor("8-EMA", "Aligned", "HIGH", true, "Price respecting 8-EMA on trend"),
        createConfluenceFactor("VWAP", "Above", "HIGH", true, "Trading above VWAP - bullish"),
        createConfluenceFactor("Hourly Level", "$451.50", "MEDIUM", true, "Strong support zone"),
        createConfluenceFactor(
          "Fibonacci",
          "0.236",
          "MEDIUM",
          true,
          "Retracement to key Fib level"
        ),
        createConfluenceFactor(
          "Patient Candle",
          "Contained",
          "HIGH",
          true,
          "PC fully inside prior range"
        ),
        createConfluenceFactor("Volume", "Increasing", "MEDIUM", true),
      ],
      timeframe: "5m",
      dayType: "TREND",
      patientCandle: {
        isContained: true,
        pcHigh: 451.8,
        pcLow: 451.2,
        pcOpen: 451.7,
        pcClose: 451.35,
        priorHigh: 452.5,
        priorLow: 450.8,
        priorOpen: 451.2,
        priorClose: 452.1,
        direction: "LONG",
      },
      priceData: generateMockCandles(451.5, 30, 0.015, "up"),
      marketPhase: "POST_10",
      tradeState: "SETUP",
      alertHistory: [],
    },

    // KCU Strategy: King & Queen
    {
      id: "2",
      symbol: "QQQ",
      setup: "King & Queen",
      price: 388.75,
      change: -1.25,
      changePercent: -0.32,
      conviction: "HIGH",
      entry: 387.0,
      target: 395.0,
      stop: 385.0,
      riskReward: "4:1",
      status: "ACTIVE",
      confluenceFactors: [
        createConfluenceFactor(
          "ORB Line",
          "Breakout",
          "HIGH",
          true,
          "Clean break above opening range"
        ),
        createConfluenceFactor("VWAP", "Reclaim", "HIGH", true, "VWAP reclaimed with volume"),
        createConfluenceFactor("8-EMA", "Aligned", "HIGH", true, "8-EMA providing support"),
        createConfluenceFactor("21-EMA", "Sloping Up", "MEDIUM", true, "Trend confirmed on 21-EMA"),
        createConfluenceFactor("Hourly Level", "$387", "HIGH", true, "Major support confluence"),
        createConfluenceFactor("Patient Candle", "Contained", "HIGH", true),
      ],
      timeframe: "2m",
      dayType: "TREND",
      patientCandle: {
        isContained: true,
        pcHigh: 387.3,
        pcLow: 386.9,
        pcOpen: 387.2,
        pcClose: 387.05,
        priorHigh: 388.0,
        priorLow: 386.5,
        priorOpen: 387.5,
        priorClose: 386.8,
        direction: "LONG",
      },
      priceData: generateMockCandles(387.0, 30, 0.012, "up"),
      marketPhase: "POST_10",
      tradeState: "SETUP",
      alertHistory: [],
    },

    // Universal Strategy: Breakout Retest
    {
      id: "3",
      symbol: "IWM",
      setup: "Breakout Retest",
      price: 215.2,
      change: 1.5,
      changePercent: 0.7,
      conviction: "MEDIUM",
      entry: 214.0,
      target: 220.0,
      stop: 212.5,
      riskReward: "4:1",
      status: "SETUP_READY",
      confluenceFactors: [
        createConfluenceFactor(
          "Structural Level",
          "$214",
          "HIGH",
          true,
          "Key resistance flipped to support"
        ),
        createConfluenceFactor(
          "Volume Surge",
          "2.3x",
          "HIGH",
          true,
          "Volume 2.3x average on breakout"
        ),
        createConfluenceFactor("RVOL", "1.8x", "MEDIUM", true, "Elevated relative volume"),
        createConfluenceFactor("EM Slope", "Bullish", "MEDIUM", true, "Moving averages sloping up"),
        createConfluenceFactor("ATR", "Expanding", "LOW", true, "Volatility increasing"),
      ],
      timeframe: "15m",
      dayType: "TREND",
      priceData: generateMockCandles(214.0, 30, 0.018, "up"),
      marketPhase: "POST_10",
      tradeState: "SETUP",
      alertHistory: [],
    },

    // Universal Strategy: Power Hour
    {
      id: "4",
      symbol: "DIA",
      setup: "Power Hour",
      price: 378.9,
      change: 0.2,
      changePercent: 0.05,
      conviction: "MEDIUM",
      entry: 377.5,
      target: 383.0,
      stop: 376.0,
      riskReward: "3.7:1",
      status: "SETUP_FORMING",
      confluenceFactors: [
        createConfluenceFactor("VWAP", "Reclaim", "HIGH", true, "VWAP reclaimed in power hour"),
        createConfluenceFactor(
          "Trend Inflection",
          "Bullish",
          "MEDIUM",
          true,
          "Shift from bear to bull"
        ),
        createConfluenceFactor("Volume", "Increasing", "HIGH", true, "Power hour volume surge"),
        createConfluenceFactor("Time", "14:45 ET", "LOW", true, "Final hour window"),
      ],
      timeframe: "5m",
      dayType: "TREND",
      priceData: generateMockCandles(377.5, 30, 0.013, "up"),
      marketPhase: "CLOSE",
      tradeState: "SETUP",
      alertHistory: [],
    },

    // Options Strategy: IV Expansion Breakout
    {
      id: "5",
      symbol: "AAPL",
      setup: "IV Expansion Breakout",
      price: 182.3,
      change: 1.8,
      changePercent: 1.0,
      conviction: "HIGH",
      entry: 181.0,
      target: 188.0,
      stop: 179.0,
      riskReward: "3.5:1",
      status: "ACTIVE",
      confluenceFactors: [
        createConfluenceFactor(
          "Price Breakout",
          "Confirmed",
          "HIGH",
          true,
          "Clean break of resistance"
        ),
        createConfluenceFactor("IVP Spike", "+18%", "HIGH", true, "IV percentile jumped 18%"),
        createConfluenceFactor(
          "IV > EM",
          "Expanding",
          "MEDIUM",
          true,
          "IV rising above moving average"
        ),
        createConfluenceFactor(
          "Call Flow",
          "Bullish",
          "MEDIUM",
          true,
          "Unusual call activity detected"
        ),
        createConfluenceFactor("Volume", "2.1x", "HIGH", true),
      ],
      timeframe: "15m",
      dayType: "TREND",
      priceData: generateMockCandles(181.0, 30, 0.02, "up"),
      marketPhase: "POST_10",
      event: "EARNINGS",
      tradeState: "SETUP",
      alertHistory: [],
    },

    // Invalid Setup Example
    {
      id: "6",
      symbol: "TSLA",
      setup: "VWAP Strategy",
      price: 242.15,
      change: -2.35,
      changePercent: -0.96,
      conviction: "LOW",
      entry: 240.0,
      target: 250.0,
      stop: 237.0,
      riskReward: "3.3:1",
      status: "DISMISSED",
      confluenceFactors: [
        createConfluenceFactor("VWAP", "Below", "LOW", true, "Below VWAP - weak"),
        createConfluenceFactor("200 SMA", "Headwind", "HIGH", true, "200 SMA blocking upside"),
        createConfluenceFactor("Patient Candle", "Invalid", "LOW", false, "PC breach detected"),
        createConfluenceFactor("Volume", "Below Avg", "LOW", false),
        createConfluenceFactor("Trend", "Weak", "LOW", false),
      ],
      timeframe: "5m",
      dayType: "CHOP",
      patientCandle: {
        isContained: false,
        pcHigh: 241.8,
        pcLow: 240.2,
        pcOpen: 241.5,
        pcClose: 240.6,
        priorHigh: 241.5,
        priorLow: 239.8,
        priorOpen: 240.5,
        priorClose: 241.2,
        direction: "LONG",
      },
      priceData: generateMockCandles(240.0, 30, 0.02, "down"),
      warnings: {
        sma200Headwind: true,
        pcInvalid: true,
      },
      marketPhase: "POST_10",
      tradeState: "SETUP",
      alertHistory: [],
    },

    // Universal Strategy: Momentum
    {
      id: "7",
      symbol: "NVDA",
      setup: "Bullish Flag Breakout",
      price: 485.6,
      change: 8.2,
      changePercent: 1.72,
      conviction: "HIGH",
      entry: 483.0,
      target: 495.0,
      stop: 480.0,
      riskReward: "4:1",
      status: "ACTIVE",
      confluenceFactors: [
        createConfluenceFactor(
          "Pattern",
          "Bull Flag",
          "HIGH",
          true,
          "Textbook consolidation after rally"
        ),
        createConfluenceFactor("Volume", "Breakout", "HIGH", true, "Volume confirming breakout"),
        createConfluenceFactor("Trend", "Strong", "HIGH", true, "Higher highs & higher lows"),
        createConfluenceFactor("RVOL", "3.2x", "HIGH", true, "3.2x relative volume"),
        createConfluenceFactor("Momentum", "Accelerating", "MEDIUM", true),
      ],
      timeframe: "15m",
      dayType: "TREND",
      priceData: generateMockCandles(483.0, 30, 0.025, "up"),
      marketPhase: "POST_10",
      tradeState: "SETUP",
      alertHistory: [],
    },

    // Monitoring State Example
    {
      id: "8",
      symbol: "AMD",
      setup: "Support/Resistance Bounce",
      price: 142.8,
      change: 0.45,
      changePercent: 0.32,
      status: "MONITORING",
      confluenceFactors: [
        createConfluenceFactor("S/R Level", "$142.50", "MEDIUM", true, "Approaching support"),
        createConfluenceFactor("Volume", "Average", "LOW", true),
        createConfluenceFactor("Trend", "Forming", "LOW", false, "Waiting for confirmation"),
      ],
      timeframe: "15m",
      dayType: "UNKNOWN",
      priceData: generateMockCandles(142.8, 30, 0.01, "sideways"),
      tradeState: "SETUP",
      alertHistory: [],
    },
  ];
}
